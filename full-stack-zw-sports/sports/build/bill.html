<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><title>我的课程</title><link rel="stylesheet" href="css/reset-dd71e4cbba.css"><script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><script src="https://cdn.bootcss.com/vue/2.2.6/vue.min.js"></script><script src="js/common-9de3ecab4b.js"></script><script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script></head><body><style>.list .box{overflow:hidden;margin-bottom:1rem;border-bottom:1px solid #efefef;padding-bottom:1rem;position:relative}.box img,.box>div{float:left;line-height:1.5}.box img{display:block;width:8rem;height:8rem;margin-right:1rem;background:#c1c1c1}.box .address img{width:2rem;height:auto;position:relative;top:-.5rem;margin-right:.3rem;background:#fff}.box .name{width:15rem;font-size:2rem;color:#333;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.box .address{font-size:1.2rem;padding-top:.5rem;color:#666;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.box .pay{position:absolute;right:1rem;bottom:1rem}.box .pay.no{float:right;color:red}.box .pay.ok{float:right;color:#366}</style><div class="top"><img src="img/ball.png"> 我的课程</div><div class="ctn"><div class="list"><a v-for="(item,i) in lists" :href="'detail.html?id='+item.id" @click="clickItem(item)"><div class="box"><img :src="'http://www.zhengwusport.com'+item.train.photo" alt=""><div><div class="name">{{item.train.name}}</div><div class="address">{{item.tclass.name}}</div><div class="address">费用：{{item.pay}}</div><div v-if="item.pay-0==0" class="address pay no">未支付</div><div v-if="item.pay-0==1" class="address pay ok">已支付</div></div></div></a><div v-if="lists.length==0" style="margin:.5rem;text-align:center">暂无</div><div v-if="!isMore && lists.length>0" style="margin:.5rem;text-align:center">没有更多了</div></div></div><script>new Vue({el:".ctn",data:{lists:[],isMore:!0,done:!0,page:1},mounted:function(){this.list(1),this.$nextTick(function(){var t=this;$(window).scroll(function(){$(document).height()-$(document).scrollTop()-$(window).height()==0&&t.isMore&&t.done&&(t.page++,t.list(t.page))})})},methods:{list:function(t){var e=this;e.done=!1,e._ajaxData("get","/zhengwu/user/list",{pageNo:t,userinfoId:localStorage.zwUserId},function(t){var i=t.list||[];i.length>0?e.lists=e.lists.concat(i):e.isMore=!1,e.done=!0,i.length<t.pageSize&&(e.isMore=!1),e.lists.length>=t.count&&(e.isMore=!1)})},clickItem:function(t){if(t.pay-0==0)if(confirm("是否重新去支付？取消进入详情")){var e=this;e._ajaxData("post","/zhengwu/pay",{fee:t.pay,userId:localStorage.zwUserId,title:t.tclass.name},function(t){e.startWxPay(t)})}else location.href="detail.html?id="+t.id;else location.href="detail.html?id="+t.id},startWxPay:function(t){wx.config({debug:!1,appId:"wx403ead26691402fb",timestamp:t.timeStamp,nonceStr:t.nonceStr,signature:t.paySign,jsApiList:["chooseWXPay"]}),wx.chooseWXPay({timestamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:"MD5",paySign:t.paySign,success:function(t){"chooseWXPay:ok"==t.errMsg?window.location.href="/bill.html":alert(t.errMsg)},cancel:function(t){window.location.href="/bill.html"}})}}})</script></body></html>