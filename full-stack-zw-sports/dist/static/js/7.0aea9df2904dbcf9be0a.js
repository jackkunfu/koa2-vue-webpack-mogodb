webpackJsonp([7],{170:function(e,t,a){var n=a(67)(a(190),a(222),null,null);e.exports=n.exports},190:function(e,t,a){"use strict";function n(e,t){return new s.a(function(a,n){d.a.ajax({url:"/api"+e,data:t,type:"post"}).done(function(e){console.log(e),a(e)}).fail(function(e){n(e)})})}Object.defineProperty(t,"__esModule",{value:!0});var i=a(22),r=a.n(i),l=a(21),o=a.n(l),c=a(24),s=a.n(c),u=a(20),d=a.n(u),p=(a(42),[{id:0,name:"角色1",createTime:"2017-1-1",powers:[{id:0,name:"权限一",operate:[{id:11,name:"增加",status:!1},{id:11,name:"删除",status:!0},{id:11,name:"编辑",status:!0}]},{id:0,name:"权限22",operate:[{id:11,name:"增加",status:!1},{id:11,name:"删除",status:!0},{id:11,name:"编辑",status:!1}]}]},{id:1,name:"角色2",createTime:"2017-11-11",powers:[{id:10,name:"权限222",operate:[{id:111,name:"增加",status:!0},{id:111,name:"删除",status:!1},{id:111,name:"编辑",status:!0}]}]}]);p=p.concat(p),p=p.concat(p);t.default={data:function(){return{curRole:{},labelPosition:"left",roleData:[],totalPage:1e3,currentPage:1,curEditing:null}},beforeMount:function(){},mounted:function(){this.$store.state.topTip="角色管理",this.roleData=p,this.$nextTick(function(){})},methods:{edit:function(e,t,a){var n=d.a.extend(!0,{},t);this.curRole=n,this.curRole.nameCopy=this.curRole.name,d()(window).scrollTop(d()(".edit-ctn").offset().top),d()(".edit-ctn").show(),this.curEditing={id:a,index:e}},del:function(e,t,a){console.log(a),this.roleData.splice(e,1)},getData:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._apiData.roleList();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)}))()},editOk:function(){var e=this;return o()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/admin/updateRole",e.curRole);case 2:a=t.sent,console.log(a),a.success&&e.$set(e.roleData,e.curEditing.index,e.curRole),e.curRole.nameCopy=null;case 6:case"end":return t.stop()}},t,e)}))()},editCancel:function(){d()(".edit-ctn").hide()}}}},222:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleData,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"角色ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"添加时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"管理"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"edit",size:"small",title:"配置权限"},on:{click:function(a){e.edit(t.$index,t.row,t.row.id)}}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"delete",size:"small",title:"删除"},on:{click:function(a){e.del(t.$index,t.row,t.row.id)}}})]}}])}),e._v(" "),a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.totalPage,"page-size":10,"current-page":e.currentPage}})],1),e._v(" "),a("div",{staticClass:"edit-ctn",staticStyle:{"margin-top":"20px"}},[a("div",{staticStyle:{color:"#20a0ff"}},[e._v(e._s(e.curRole.name?"编辑"+e.curRole.nameCopy:""))]),e._v(" "),a("el-form",{staticStyle:{width:"50%",padding:"20px"},attrs:{"label-width":"80px",model:e.curRole}},[a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{model:{value:e.curRole.name,callback:function(t){e.curRole.name=t},expression:"curRole.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"添加时间"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.curRole.createTime,callback:function(t){e.curRole.createTime=t},expression:"curRole.createTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作"}},e._l(e.curRole.powers,function(t,n){return a("div",{key:t.id},[a("span",{staticStyle:{display:"inline-block",width:"120px"}},[e._v(e._s(t.name))]),e._v(" "),e._l(t.operate,function(t,n){return a("span",{key:t.id,staticStyle:{"margin-right":"10px"}},[a("el-checkbox",{model:{value:t.status,callback:function(e){t.status=e},expression:"cur.status"}}),e._v("\n                        "+e._s(t.name)+"\n                    ")],1)})],2)})),e._v(" "),a("el-button",{staticStyle:{margin:"0 50px 30px 80px"},on:{click:e.editOk}},[e._v("确定")]),e._v(" "),a("el-button",{staticStyle:{margin:"0 50px 30px 80px"},on:{click:e.editCancel}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]}}});