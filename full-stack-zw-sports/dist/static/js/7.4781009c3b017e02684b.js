webpackJsonp([7],{170:function(e,t,n){var a=n(67)(n(190),n(222),null,null);e.exports=a.exports},190:function(e,t,n){"use strict";function a(e,t){return new s.a(function(n,a){d.a.ajax({url:"/api"+e,data:t,type:"post"}).done(function(e){console.log(e),n(e)}).fail(function(e){a(e)})})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),i=n.n(r),l=n(21),o=n.n(l),c=n(24),s=n.n(c),u=n(20),d=n.n(u),p=(n(42),[{id:0,name:"角色1",createTime:"2017-1-1",powers:[{id:0,name:"权限一",operate:[{id:11,name:"增加",status:!1},{id:11,name:"删除",status:!0},{id:11,name:"编辑",status:!0}]},{id:0,name:"权限22",operate:[{id:11,name:"增加",status:!1},{id:11,name:"删除",status:!0},{id:11,name:"编辑",status:!1}]}]},{id:1,name:"角色2",createTime:"2017-11-11",powers:[{id:10,name:"权限222",operate:[{id:111,name:"增加",status:!0},{id:111,name:"删除",status:!1},{id:111,name:"编辑",status:!0}]}]}]);p=p.concat(p),p=p.concat(p);t.default={data:function(){return{curRole:{},labelPosition:"left",roleData:[],totalPage:1e3,currentPage:1,curEditing:null}},beforeMount:function(){},mounted:function(){this.$store.state.topTip="角色管理",this.roleData=p,this.$nextTick(function(){})},methods:{edit:function(e,t,n){var a=d.a.extend(!0,{},t);this.curRole=a,this.curRole.nameCopy=this.curRole.name,d()(window).scrollTop(d()(".edit-ctn").offset().top),d()(".edit-ctn").show(),this.curEditing={id:n,index:e}},del:function(e,t,n){console.log(n),this.roleData.splice(e,1)},getData:function(){var e=this;return o()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._apiData.roleList();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)}))()},editOk:function(){var e=this;return o()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.curRole.name.replace(/\s+/g,"")){t.next=3;break}return alert("buneng weikong "),t.abrupt("return");case 3:return t.next=5,a("/admin/updateRole",e.curRole);case 5:n=t.sent,console.log(n),n.success&&e.$set(e.roleData,e.curEditing.index,e.curRole),e.curRole.nameCopy=null;case 9:case"end":return t.stop()}},t,e)}))()},editCancel:function(){d()(".edit-ctn").hide()}}}},222:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-col",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleData,stripe:""}},[n("el-table-column",{attrs:{prop:"id",label:"角色ID"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"createTime",label:"添加时间"}}),e._v(" "),n("el-table-column",{attrs:{label:"管理"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",icon:"edit",size:"small",title:"配置权限"},on:{click:function(n){e.edit(t.$index,t.row,t.row.id)}}}),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"delete",size:"small",title:"删除"},on:{click:function(n){e.del(t.$index,t.row,t.row.id)}}})]}}])}),e._v(" "),n("el-pagination",{attrs:{layout:"prev, pager, next",total:e.totalPage,"page-size":10,"current-page":e.currentPage}})],1),e._v(" "),n("div",{staticClass:"edit-ctn",staticStyle:{"margin-top":"20px"}},[n("div",{staticStyle:{color:"#20a0ff"}},[e._v(e._s(e.curRole.name?"编辑"+e.curRole.nameCopy:""))]),e._v(" "),n("el-form",{staticStyle:{width:"50%",padding:"20px"},attrs:{"label-width":"80px",model:e.curRole}},[n("el-form-item",{attrs:{label:"角色名称"}},[n("el-input",{model:{value:e.curRole.name,callback:function(t){e.curRole.name=t},expression:"curRole.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"添加时间"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.curRole.createTime,callback:function(t){e.curRole.createTime=t},expression:"curRole.createTime"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"操作"}},e._l(e.curRole.powers,function(t,a){return n("div",{key:t.id},[n("span",{staticStyle:{display:"inline-block",width:"120px"}},[e._v(e._s(t.name))]),e._v(" "),e._l(t.operate,function(t,a){return n("span",{key:t.id,staticStyle:{"margin-right":"10px"}},[n("el-checkbox",{model:{value:t.status,callback:function(e){t.status=e},expression:"cur.status"}}),e._v("\n                        "+e._s(t.name)+"\n                    ")],1)})],2)})),e._v(" "),n("el-button",{staticStyle:{margin:"0 50px 30px 80px"},on:{click:e.editOk}},[e._v("确定")]),e._v(" "),n("el-button",{staticStyle:{margin:"0 50px 30px 80px"},on:{click:e.editCancel}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]}}});