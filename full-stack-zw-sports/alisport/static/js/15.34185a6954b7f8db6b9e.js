webpackJsonp([15],{372:function(t,i,e){function s(t){e(498)}var o=e(127)(e(500),e(501),s,"data-v-4d7b712b",null);t.exports=o.exports},379:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+IEmuOgAAAgtJREFUWIXt1ztrFGEYhuErBxVFQUGbrewELRfUQkEQPIBiPGEjBpIgKmJhYauInY1FEJRoPKBBEBQlmEBAEH+CB/wFBmwEjahEYvElknyTmewuk5kgc8Oyy7MM3OzOPO/7UVFRUQFt9Xq9leu2YhAbcR1X8lNKp72Fa3ZgDJuxCpexKU+pNJqV3YlXWBPly/LRyaYZ2V0Yweoof4B3eQll0ajsbgwLf/tsHqEnV6MMGpHdgxeSovfRjT95S6WxkOw+PJcUHUSvAkXJlt0viK6M8gEliJIue1AQXRHlt3AaU4splcZ8sl14iuVRfhNnlSRKUvYonkiK9uO8EkWZK3scQ5KiN3BByaLQOf1+QujMjuj7O7iKtUVKRUzhK2GRSRNdSoyjp61er3/B+rJtGuBzK1tXabQLT3nhBd8k4+jtFKqqHQ8l79sBXCpYLObfAzbTBkOYxONZGfThOy5aAtXVUavVZj5/mH51mfsLb8c6jBarlmS2LHzEexw2V3gbNginhNKYrw2e4Rh+R/k5YT9oW2ypNNKq6yWO4FeUn8FtJQln9eywcP/+jPI+oSUKn3gLDYURQfhHlPcIe0Ohwo1MsFEckhTuxj0FCjc6bsdwQFL4JO7mapRBM7vBa+FcNhHlp7AlN6MMml1k3ggn3m9RPpmPTjatbF1vsVeYdhO4hk95SlVUVFT8R/wFRURXGecH2+wAAAAASUVORK5CYII="},380:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={data:function(){return{areaList:[]}},methods:{showNearList:function(t){this.areaList=t.regeocode.pois},getAddressInfo:function(t,i){var e=this;$.ajax({type:"GET",url:"https://restapi.amap.com/v3/geocode/regeo",dataType:"JSON",data:{output:"JSON",location:t+","+i,key:"5b384bd6b1c25c86a18cdef18c82c679",radius:10,extensions:"base"},success:function(s){e.chooseMapCallback&&e.chooseMapCallback(s,t,i)}})},showMap:function(){var t,i=this,e=!0;this.cmFun.getLocation(function(s){i.lng=s.coords.longitude,i.lat=s.coords.latitude,t=[s.coords.longitude,s.coords.latitude],e=!1}),this.isMapShow=!0;var s=this;AMapUI.loadUI(["misc/PositionPicker"],function(t){function i(t){t.poi&&t.poi.location&&(e.setZoom(15),e.setCenter(t.poi.location),marker.setPosition(new AMap.LngLat(t.poi.location.lng,t.poi.location.lat)))}var e=new AMap.Map("map",{zoom:16,scrollWheel:!1}),o=new t({mode:"dragMap",map:e});o.start(),e.panBy(0,1),o.on("success",function(t){console.log(t),s.showNearList(t)});var a=new AMap.Autocomplete({input:"searchkey"});AMap.event.addListener(a,"select",i);e.on("click",function(t){var i=t.lnglat.getLng(),e=t.lnglat.getLat();$.ajax({type:"GET",url:"https://restapi.amap.com/v3/geocode/regeo",dataType:"JSON",data:{output:"JSON",location:i+","+e,key:"5b384bd6b1c25c86a18cdef18c82c679",radius:10,extensions:"base"},success:function(t){s.chooseMapCallback&&s.chooseMapCallback(t,i,e)}})})})}}}},498:function(t,i,e){var s=e(499);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e(350)("38b62574",s,!0)},499:function(t,i,e){i=t.exports=e(349)(!1),i.push([t.i,".activity-sign[data-v-4d7b712b]{padding-bottom:4rem}.row[data-v-4d7b712b]{border-bottom:1px solid #c1c1c1;padding:.5rem;background:#fff;text-align:left}.row label[data-v-4d7b712b]{font-size:1rem;line-height:1.5rem;color:red;display:block}.row label span[data-v-4d7b712b]{color:#333}.row img[data-v-4d7b712b]{float:right;margin:-1rem .5rem 0 0;width:1rem}.row input[data-v-4d7b712b]{width:80%;font-size:.8rem;height:1.5rem;color:#666;border:none}.map-ctn #map[data-v-4d7b712b],.map-ctn .close[data-v-4d7b712b],.map-ctn .search[data-v-4d7b712b]{position:fixed}.map-ctn #map[data-v-4d7b712b]{width:100%;height:100%;top:0;left:0}.map-ctn .search[data-v-4d7b712b]{width:20rem;height:2.5rem;top:3rem;left:50%;margin-left:-10rem}.map-ctn .search input[data-v-4d7b712b]{width:100%;height:100%;background:#fff;font-size:1rem}.map-ctn .close[data-v-4d7b712b]{width:5rem;height:5rem;font-size:4rem;text-align:center;background:#fff;border:1px solid #c1c1c1;top:10rem;left:50%;margin-left:20rem}.file[data-v-4d7b712b]{margin-right:.5rem;font-size:3rem;line-height:8rem;position:relative;text-align:center}.file img[data-v-4d7b712b],.file input[data-v-4d7b712b]{display:block;position:absolute;width:100%;height:100%;top:0;left:0;margin:0;border:none;z-index:1}.file input[data-v-4d7b712b]{z-index:2;opacity:0}.file img[data-v-4d7b712b]{width:auto;height:auto;max-width:100%;max-height:100%;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}",""])},500:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e(380),o=function(t){return t&&t.__esModule?t:{default:t}}(s);i.default={name:"enroll",mixins:[o.default],data:function(){return{options:{},keyStr:this.$route.query.keys,keys:[],isMapShow:!1,showBtm:!1,act:this.$route.query.act,info:{name:"",mobile:"",blood:"",birth:""},btmKey:"",activeId:this.$route.query.activeId,aliActiveEventId:this.$route.query.eventId,allKey:[{key:"name",str:"真实姓名"},{key:"sex",str:"性别"},{key:"mobile",str:"手机号"},{key:"email",str:"邮箱"},{key:"country",str:"国籍"},{key:"city",str:"城市"},{key:"address",str:"详细地址"},{key:"blood",str:"血型"},{key:"birth",str:"出生日期"},{key:"cardType",str:"证件类型"},{key:"cardno",str:"证件号"},{key:"clothSize",str:"服装尺码"},{key:"contact",str:"紧急联系人"},{key:"contactNumber",str:"紧急联系人电话"},{key:"raceCert",str:"完赛证明"},{key:"healthCert",str:"健康证明"}]}},mounted:function(){var t=this;aliPayNative.setTitle("报名"),aliPayNative.setOptBtn("");var i=["sex","height","weight","blood","cardType","clothSize","city","address"],e=["raceCert","healthCert"];if(this.keys=JSON.parse(this.keyStr),console.log(this.keys),this.keys=this.keys.map(function(s){return i.indexOf(s.key)>=0?t.$set(s,"valueType",1):e.indexOf(s.key)>=0?t.$set(s,"valueType",2):t.$set(s,"valueType",3),s}),this.keys.map(function(t){return t.key}).indexOf("birth")>-1){var s=this;setTimeout(function(){(new datePicker).init({trigger:"#birth",type:"date",minDate:"1900-1-1",maxDate:"2099-1-1",onSubmit:function(){s.options.birth=this.value},onClose:function(){}})},100)}},methods:{change:function(t){var i=this;this.cmFun.upFile(t,"dir",function(e){if(1!=e.code)return void alert(e.msg);i.$set(i.options,t,e.data)})},inputClick:function(t){"city"==t.key||"address"==t.key?(this.isMapShow=!0,this.showMap()):(this.showBtm=!0,this.btmKey=t.key)},updateMsg:function(t){this.options[this.btmKey]=t},goBack:function(){window.history.go(-1)},enroll:function(){var t=this,i=this.keys.map(function(t){return t.key});if(i.indexOf("nick")>-1&&(!this.options.nick||""==this.options.nick.trim()))return void alert("昵称没填~");if(i.indexOf("name")>-1&&(!this.options.name||""==this.options.name.trim()))return void alert("真实姓名没填~");if(i.indexOf("sex")>-1&&(!this.options.sex||""==this.options.sex.trim()))return void alert("性别没选~");if(i.indexOf("birth")>-1&&(!this.options.birth||""==this.options.birth.trim()))return void alert("生日没选~");if(i.indexOf("email")>-1){if(!this.options.email||""==this.options.email.trim())return void alert("邮箱没填~");if(this.options.email=this.options.email.trim(),!/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(this.options.email))return void alert("邮箱格式不对~")}if(i.indexOf("city")>-1&&(!this.options.city||""==this.options.city.trim()))return void alert("城市地址没选~");if(i.indexOf("height")>-1&&(!this.options.height||""==this.options.height.trim()))return void alert("身高没选~");if(i.indexOf("weight")>-1&&(!this.options.weight||""==this.options.weight.trim()))return void alert("体重没选~");if(i.indexOf("blood")>-1&&(!this.options.blood||""==this.options.blood.trim()))return void alert("血型没选~");if(i.indexOf("cardType")>-1&&(!this.options.cardType||""==this.options.cardType.trim()))return void alert("证件类型没选~");if(i.indexOf("cardno")>-1){if(!this.options.cardno||""==this.options.cardno.trim())return void alert("证件号没填~");this.options.cardno=this.options.cardno.trim();var e=/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,s=/^1[45][0-9]{7}|([P|p|S|s]\d{7})|([S|s|G|g]\d{8})|([Gg|Tt|Ss|Ll|Qq|Dd|Aa|Ff]\d{8})|([H|h|M|m]\d{8，10})$/,o=/^[a-zA-Z0-9]{5,21}$/;if(!(e.test(this.options.cardno)||s.test(this.options.cardno)||o.test(this.options.cardno)))return void alert("证件号有误~")}if(i.indexOf("clothSize")>-1&&(!this.options.clothSize||""==this.options.clothSize.trim()))return void alert("服装尺寸没选~");if(i.indexOf("contact")>-1&&(!this.options.contact||""==this.options.contact.trim()))return void alert("紧急联系人没填~");if(i.indexOf("contactNumber")>-1){if(!this.options.contactNumber||""==this.options.contactNumber.trim())return void alert("紧急联系人电话没填~");if(this.options.contactNumber=this.options.contactNumber.trim(),!/^1[3|4|5|7|8][0-9]\d{8}$/.test(this.options.contactNumber))return void alert("紧急联系人电话有误~")}var a=this.options;a.aliActiveEventId=this.aliActiveEventId,a.activeId=this.activeId,a.userId=localStorage.aliSportUserId,a.sex&&(a.sex="男"==a.sex?"1":"0"),a.birth&&(a.birth=new Date(a.birth).getTime()),this.cmFun.ajax("post","/active/user/save",a,function(i){alert(i.msg),1==i.code&&t.$router.push({path:"/activityDetail",query:{id:t.activeId,isEnroll:!0}})})},chooseMapCallback:function(t,i,e){var s=this,o=t.regeocode.addressComponent,a={longitude:i,latitude:e,province:o.province,city:"string"==typeof o.city?o.city:"",area:o.district,address:t.regeocode.formatted_address};$(".amap-sug-result").remove(),s.options.address=a.address,s.options.city=a.city,s.options.longitude=a.longitude,s.options.latitude=a.latitude,s.isMapShow=!1}}}},501:function(t,i,e){t.exports={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"activity-sign"},[s("div",{staticClass:"team-item",attrs:{id:"aa"}},[s("div",{staticClass:"img"},[s("img",{attrs:{src:t.act.image}})]),s("div",{staticClass:"name"},[t._v(t._s(t.act.name))]),s("div",{staticClass:"address"},[t._v(t._s(t.act.address))])]),t._l(t.keys,function(i){return s("div",{staticClass:"row"},[s("label",[t._v("*"),s("span",[t._v(t._s(i.str))])]),1==i.valueType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.options[i.key],expression:"options[item.key]"}],attrs:{type:"text",placeholder:"请选择"+i.str,readonly:"readonly",onfocus:"this.blur()"},domProps:{value:t.options[i.key],value:t.options[i.key]},on:{click:function(e){t.inputClick(i)},input:function(e){e.target.composing||t.$set(t.options,i.key,e.target.value)}}}):t._e(),2==i.valueType?s("div",{staticClass:"file"},[s("span",[t._v("+")]),s("img",{attrs:{src:t.options[i.key]}}),s("input",{attrs:{type:"file",id:i.key},on:{change:function(e){t.change(i.key)}}})]):t._e(),3==i.valueType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.options[i.key],expression:"options[item.key]"}],attrs:{type:"text",placeholder:"请输入"+i.str,id:"birth"==i.key?"birth":""},domProps:{value:t.options[i.key],value:t.options[i.key]},on:{input:function(e){e.target.composing||t.$set(t.options,i.key,e.target.value)}}}):t._e()])}),s("div",{staticClass:"btm-hide",class:t.showBtm?"show":"hide",on:{click:function(i){t.showBtm=!1}}},["sex"==t.btmKey?s("div",{staticClass:"btm"},[s("div",{staticClass:"title"},[t._v("选择性别")]),s("ul",[s("li",{on:{click:function(i){t.updateMsg("男")}}},[t._v("男")]),s("li",{on:{click:function(i){t.updateMsg("女")}}},[t._v("女")])])]):t._e(),"height"==t.btmKey?s("div",{staticClass:"btm"},[s("div",{staticClass:"title"},[t._v("选择身高")]),s("ul",t._l([140,145,150,155,160,165,170,175,180,185,190,195],function(i){return s("li",{on:{click:function(e){t.updateMsg(i)}}},[t._v(t._s(i))])}))]):t._e(),"weight"==t.btmKey?s("div",{staticClass:"btm"},[s("div",{staticClass:"title"},[t._v("选择体重")]),s("ul",t._l([50,55,60,65,70,75,80,85,90,95,100,105,110,115,120],function(i){return s("li",{on:{click:function(e){t.updateMsg(i)}}},[t._v(t._s(i))])}))]):t._e(),"blood"==t.btmKey?s("div",{staticClass:"btm"},[s("div",{staticClass:"title"},[t._v("血型")]),s("ul",t._l(["O","AB","A","B"],function(i){return s("li",{on:{click:function(e){t.updateMsg(i)}}},[t._v(t._s(i))])}))]):t._e(),"cardType"==t.btmKey?s("div",{staticClass:"btm"},[s("div",{staticClass:"title"},[t._v("证件类型")]),s("ul",t._l(["身份证","港澳台通行证","台胞证","护照"],function(i){return s("li",{on:{click:function(e){t.updateMsg(i)}}},[t._v(t._s(i))])}))]):t._e(),"clothSize"==t.btmKey?s("div",{staticClass:"btm"},[s("div",{staticClass:"title"},[t._v("服装尺码")]),s("ul",t._l(["S","M","L","XL","XXL"],function(i){return s("li",{on:{click:function(e){t.updateMsg(i)}}},[t._v(t._s(i))])}))]):t._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isMapShow,expression:"isMapShow"}],staticClass:"map-ctn"},[s("div",{staticClass:"page-title"},[s("img",{staticClass:"back",attrs:{src:e(379)},on:{click:function(i){t.isMapShow=!1}}}),t._v("地图")]),s("div",{staticClass:"map"},[s("div",{attrs:{id:"map"}}),s("div",{staticClass:"area-list"},t._l(t.areaList,function(i,e){return s("div",{staticClass:"item",on:{click:function(e){t.getAddressInfo(i.location.lng,i.location.lat)}}},[s("div",{staticClass:"name"},[t._v(t._s(i.name))]),s("div",{staticClass:"address"},[t._v(t._s(i.address))])])}))])]),s("div",{staticClass:"fix-bottom",on:{click:t.enroll}},[s("div",[t._v("确定")])])],2)},staticRenderFns:[]}}});