webpackJsonp([16],{111:function(t,i,e){var a=e(112);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(18)("5ec96dac",a,!0)},112:function(t,i,e){i=t.exports=e(17)(!1),i.push([t.i,".form .row .img .upimg[data-v-6cae86ff]{left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);background:#fff;height:100%}.edit-input[data-v-6cae86ff]{font-size:1rem;width:100%;background:#fff;padding-left:.3rem;margin-top:.5rem;height:2.5rem;border:none}.edit-input+span[data-v-6cae86ff]{float:right;margin-right:.5rem}.map-ctn #map[data-v-6cae86ff],.map-ctn .close[data-v-6cae86ff],.map-ctn .search[data-v-6cae86ff]{position:fixed}.map-ctn #map[data-v-6cae86ff]{width:100%;height:100%;top:0;left:0}.map-ctn .search[data-v-6cae86ff]{width:20rem;height:2.5rem;top:3rem;left:50%;margin-left:-10rem}.map-ctn .search input[data-v-6cae86ff]{width:100%;height:100%;background:#fff;font-size:1rem}.map-ctn .close[data-v-6cae86ff]{width:5rem;height:5rem;font-size:4rem;text-align:center;background:#fff;border:1px solid #c1c1c1;top:10rem;left:50%;margin-left:20rem}",""])},113:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(t){return 1==(t+"").length?"0"+t:t};i.default={name:"myInfo",filters:{birth:function(t){if(!t)return"";var i=new Date(t);return a(i.getFullYear())+"-"+a(i.getMonth())+"-"+a(i.getDate())},address:function(t){return t?t.length>20?t.substring(0,20)+"...":t:""}},data:function(){return{info:{},id:localStorage.aliSportUserId,editStatus:!1,editKey:"",editStr:"",editNick:"",editName:"",editEmail:"",editCardno:"",editContact:"",editContactNo:"",showBtm:!1,btmKey:"",showDate:!1,isMapShow:!1,canChangeRealName:!1}},components:{},mounted:function(){var t=this;this.$nextTick(function(){t.cmFun.ajax("get","/user/view/"+t.id,{},function(i){t.info=i,0==t.info.sex?t.info.sex="女":1==t.info.sex&&(t.info.sex="男"),i.name&&""!=i.name.replace(/\s+/g,"")||(t.canChangeRealName=!0)});var i=new Date,e=(i.getFullYear(),i.getMonth(),i.getDate(),t);(new datePicker).init({trigger:"#birth",type:"date",minDate:"1900-1-1",maxDate:"2099-1-1",onSubmit:function(){e.info.birth=this.value},onClose:function(){}})})},methods:{save:function(){var t=this;if(!this.info.nick||""==this.info.nick.trim())return void alert("昵称没填~");if(!this.info.name||""==this.info.name.trim())return void alert("真实姓名没填~");if(!this.info.sex||""==this.info.sex)return void alert("性别没选~");if(!this.info.birth||""==this.info.birth)return void alert("生日没选~");if(!this.info.email||""==this.info.email.trim())return void alert("邮箱没填~");if(!this.info.city||""==this.info.city)return void alert("城市地址没选~");if(!this.info.height||""==this.info.height)return void alert("身高没选~");if(!this.info.weight||""==this.info.weight)return void alert("体重没选~");if(!this.info.blood||""==this.info.blood)return void alert("血型没选~");if(!this.info.cardType||""==this.info.cardType)return void alert("证件类型没选~");if(!this.info.cardno||""==this.info.cardno.trim())return void alert("证件号没填~");if(!this.info.colthSize||""==this.info.colthSize)return void alert("服装尺寸没选~");if(!this.info.contact||""==this.info.contact.trim())return void alert("紧急联系人没填~");if(!this.info.contactNumber||""==this.info.contactNumber.trim())return void alert("紧急联系人电话没填~");var i=$.extend(!0,{},this.info);"男"==i.sex?i.sex=1:"女"==i.sex&&(i.sex=0),i.birth=new Date(i.birth).getTime(),this.cmFun.ajax("post","/user/save",i,function(i){if(1!=i.code)return void alert(i.msg);t.info={},t.$router.push({path:"/my",query:{id:t.id}})})},updateMsg:function(t){var i=this.btmKey,e={};e[i]=t,this.info[i]=t,e.id=this.id},edit:function(t){("name"!=t||this.canChangeRealName)&&(this.editKey=t,this.editStatus=!0,"nick"==t?this.editStr="昵称":"email"==t?this.editStr="邮箱":"contact"==t?this.editStr="联系人姓名":"contactNumber"==t?this.editStr="联系人联系方式":"cardno"==t&&(this.editStr="证件号"))},editSure:function(){var t={};if("name"==this.editKey){var i=this.editName.trim();if(""==i)return void alert("真实姓名不能为空");t[this.editKey]=i,this.info[this.editKey]=i}else if("nick"==this.editKey){var i=this.editNick.trim();if(""==i||i.length>13)return void alert("昵称长度为13个以内");t[this.editKey]=i,this.info[this.editKey]=i}else if("email"==this.editKey){if(!/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(this.editEmail))return void alert("邮箱格式不对~");t[this.editKey]=this.editEmail,this.info[this.editKey]=this.editEmail}else if("contact"==this.editKey){var i=this.editContact.trim();if(""==i)return void alert("不能为空~");t[this.editKey]=this.editContact,this.info[this.editKey]=this.editContact}else if("contactNumber"==this.editKey){if(!/^1[3|4|5|7|8][0-9]\d{8}$/.test(this.editContactNo))return void alert("号码有误~");t[this.editKey]=this.editContactNo,this.info[this.editKey]=this.editContactNo}else if("cardno"==this.editKey){var e=/^[1-9]\d{5}[1-2]\d{10}([0-9]|x|X)$/,a=/(^[a-zA-Z0-9]{3,21}$)|(^(P\d{7})|(G\d{8})$)/,s=/^[a-zA-Z0-9]{5,21}$/;if(!(e.test(this.editCardno)||a.test(this.editCardno)||s.test(this.editCardno)))return void alert("证件号有误~");t[this.editKey]=this.editCardno,this.info[this.editKey]=this.editCardno}this.editKey="",this.editNick=this.editName=this.editEmail=this.editCardno=this.editContact=this.editContactNo=""},upImg:function(t,i){var e=this;this.cmFun.upFile(t,"dir",function(t){if(1!=t.code)return void alert(t.msg);var a={};a.id=e.id,a[i]=t.data,e.info[i]=t.data})},timeChange:function(t){this.info.birth=t,this.showDate=!1},goBack:function(){window.history.go(-1)},showMap:function(){function t(t){t.poi&&t.poi.location&&(s.setZoom(15),s.setCenter(t.poi.location),marker.setPosition(new AMap.LngLat(t.poi.location.lng,t.poi.location.lat)),document.getElementById("longitude").value=t.poi.location.lng,document.getElementById("latitude").value=t.poi.location.lat,document.getElementById("address").value=t.poi.district+t.poi.district.address)}var i,e=this,a=!0;this.cmFun.getLocation(function(t){e.lng=t.coords.longitude,e.lat=t.coords.latitude,i=[t.coords.longitude,t.coords.latitude],a=!1}),this.isMapShow=!0;var s=new AMap.Map("map",{resizeEnable:!0,zoom:12,center:a?[120.180304,30.276887]:i}),n=this,o=(s.on("click",function(t){var i=t.lnglat.getLng(),e=t.lnglat.getLat();$.ajax({type:"GET",url:"https://restapi.amap.com/v3/geocode/regeo",dataType:"JSON",data:{output:"JSON",location:i+","+e,key:"5b384bd6b1c25c86a18cdef18c82c679",radius:10,extensions:"base"},success:function(t){var a=t.regeocode.addressComponent,s={longitude:i,latitude:e,province:a.province,city:"string"==typeof a.city?a.city:"",area:a.district,address:t.regeocode.formatted_address};$(".amap-sug-result").remove(),n.info.city=s.city,n.info.address=s.address,n.isMapShow=!1}})}),new AMap.Autocomplete({input:"searchkey"}));AMap.event.addListener(o,"select",t)}}}},114:function(t,i,e){t.exports={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"myInfo"},[""==t.editKey?a("div",[a("div",{staticClass:"page-title"},[a("img",{staticClass:"back",attrs:{src:e(43)},on:{click:t.goBack}}),t._v("个人设置"),a("div",{staticClass:"features",on:{click:t.save}},[t._v("保存")])]),a("div",{staticClass:"form"},[a("div",{staticClass:"row photo"},[a("label",[t._v("头像")]),a("div",{staticClass:"fr"},[a("img",{attrs:{src:t.info.image}}),a("input",{attrs:{type:"file",accept:"image/*",id:"file"},on:{change:function(i){t.upImg("file","image")}}})])])]),a("div",{staticClass:"sort",on:{click:function(i){t.edit("nick")}}},[t._v("昵称"),a("span",[t._v(t._s(t.info.nick))])]),a("div",{staticClass:"sort",on:{click:function(i){t.edit("name")}}},[t._v("真实姓名"),a("span",{class:t.canChangeRealName?"":"none"},[t._v(t._s(t.info.name))])]),a("div",{staticClass:"sort",on:{click:function(i){t.btmKey="sex",t.showBtm=!0}}},[t._v("性别"),a("span",[t._v(t._s(t.info.sex))])]),a("div",{staticClass:"sort",attrs:{id:"birth"},on:{click:function(i){t.showDate=!0}}},[t._v("生日"),a("span",[t._v(t._s(t._f("birth")(t.info.birth)))])]),a("div",{staticClass:"sort"},[t._v("手机号"),a("span",{staticClass:"none"},[t._v(t._s(t.info.mobile))])]),a("div",{staticClass:"sort",on:{click:function(i){t.edit("email")}}},[t._v("邮箱"),a("span",[t._v(t._s(t.info.email))])]),a("div",{staticClass:"sort",on:{click:t.showMap}},[t._v("城市"),a("span",[t._v(t._s(t.info.city))])]),a("div",{staticClass:"sort"},[t._v("详细地址"),a("span",{staticClass:"none"},[t._v(t._s(t._f("address")(t.info.address)))])]),a("div",{staticClass:"sort",on:{click:function(i){t.btmKey="height",t.showBtm=!0}}},[t._v("身高"),a("span",[t._v(t._s(t.info.height))])]),a("div",{staticClass:"sort",on:{click:function(i){t.btmKey="weight",t.showBtm=!0}}},[t._v("体重"),a("span",[t._v(t._s(t.info.weight))])]),a("div",{staticClass:"sort",on:{click:function(i){t.btmKey="blood",t.showBtm=!0}}},[t._v("血型"),a("span",[t._v(t._s(t.info.blood))])]),a("div",{staticClass:"sort",on:{click:function(i){t.btmKey="cardType",t.showBtm=!0}}},[t._v("证件类型"),a("span",[t._v(t._s(t.info.cardType))])]),a("div",{staticClass:"sort",on:{click:function(i){t.edit("cardno")}}},[t._v("证件号"),a("span",[t._v(t._s(t.info.cardno))])]),a("div",{staticClass:"sort",on:{click:function(i){t.btmKey="colthSize",t.showBtm=!0}}},[t._v("服装尺寸"),a("span",[t._v(t._s(t.info.colthSize))])]),a("div",{staticClass:"sort",on:{click:function(i){t.edit("contact")}}},[t._v("紧急联系人"),a("span",[t._v(t._s(t.info.contact))])]),a("div",{staticClass:"sort",on:{click:function(i){t.edit("contactNumber")}}},[t._v("紧急联系人号码"),a("span",[t._v(t._s(t.info.contactNumber))])]),a("div",{staticClass:"form"},[a("div",{staticClass:"row"},[a("label",[t._v("完赛证明")]),a("div",{staticClass:"img"},[a("img",{staticClass:"upimg",attrs:{src:t.info.healthCert}}),a("span",{staticClass:"up-span"},[t._v("+")]),a("input",{staticClass:"up-file",attrs:{type:"file",id:"file1"},on:{change:function(i){t.upImg("file1","healthCert")}}})])])]),a("div",{staticClass:"form"},[a("div",{staticClass:"row"},[a("label",[t._v("健康证明")]),a("div",{staticClass:"img"},[a("img",{staticClass:"upimg",attrs:{src:t.info.raceCert}}),a("span",{staticClass:"up-span"},[t._v("+")]),a("input",{staticClass:"up-file",attrs:{type:"file",id:"file2"},on:{change:function(i){t.upImg("file2","raceCert")}}})])])])]):t._e(),""!=t.editKey?a("div",[a("div",{staticClass:"page-title"},[a("img",{staticClass:"back",attrs:{src:e(43)},on:{click:function(i){t.editKey="",t.editNick=t.editName=t.editEmail=t.editCardno=t.editContact=t.editContactNo=""}}}),a("span",[t._v(t._s(t.editStr))]),a("div",{staticClass:"features",on:{click:t.editSure}},[t._v("确定")])]),"nick"==t.editKey?a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editNick,expression:"editNick"}],staticClass:"edit-input",attrs:{type:"text",placeholder:"请输入昵称",value:"editNick"},domProps:{value:t.editNick},on:{input:function(i){i.target.composing||(t.editNick=i.target.value)}}}),a("span",[t._v(t._s(13-t.editNick.replace(/\s+/g,"").length))])]):t._e(),"name"==t.editKey?a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editName,expression:"editName"}],staticClass:"edit-input",attrs:{type:"text",placeholder:"请输入真实姓名",value:"editName"},domProps:{value:t.editName},on:{input:function(i){i.target.composing||(t.editName=i.target.value)}}})]):t._e(),"email"==t.editKey?a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editEmail,expression:"editEmail"}],staticClass:"edit-input",attrs:{type:"text",placeholder:"请输入邮箱",value:"editEmail"},domProps:{value:t.editEmail},on:{input:function(i){i.target.composing||(t.editEmail=i.target.value)}}})]):t._e(),"cardno"==t.editKey?a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editCardno,expression:"editCardno"}],staticClass:"edit-input",attrs:{type:"text",placeholder:"请输入证件号",value:"editCardno.slice(0,18)"},domProps:{value:t.editCardno},on:{input:function(i){i.target.composing||(t.editCardno=i.target.value)}}})]):t._e(),"contact"==t.editKey?a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editContact,expression:"editContact"}],staticClass:"edit-input",attrs:{type:"text",placeholder:"请输入联系人姓名",value:"editContact"},domProps:{value:t.editContact},on:{input:function(i){i.target.composing||(t.editContact=i.target.value)}}})]):t._e(),"contactNumber"==t.editKey?a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editContactNo,expression:"editContactNo"}],staticClass:"edit-input",attrs:{type:"text",placeholder:"请输入联系人联系方式",value:"editContactNo"},domProps:{value:t.editContactNo},on:{input:function(i){i.target.composing||(t.editContactNo=i.target.value)}}})]):t._e()]):t._e(),a("div",{staticClass:"btm-hide",class:t.showBtm?"show":"hide",on:{click:function(i){t.showBtm=!1}}},["sex"==t.btmKey?a("div",{staticClass:"btm"},[a("div",{staticClass:"title"},[t._v("选择性别")]),a("ul",[a("li",{on:{click:function(i){t.updateMsg("男")}}},[t._v("男")]),a("li",{on:{click:function(i){t.updateMsg("女")}}},[t._v("女")])])]):t._e(),"height"==t.btmKey?a("div",{staticClass:"btm"},[a("div",{staticClass:"title"},[t._v("选择身高")]),a("ul",t._l([140,145,150,155,160,165,170,175,180,185,190,195],function(i){return a("li",{on:{click:function(e){t.updateMsg(i)}}},[t._v(t._s(i))])}))]):t._e(),"weight"==t.btmKey?a("div",{staticClass:"btm"},[a("div",{staticClass:"title"},[t._v("选择体重")]),a("ul",t._l([50,55,60,65,70,75,80,85,90,95,100,105,110,115,120],function(i){return a("li",{on:{click:function(e){t.updateMsg(i)}}},[t._v(t._s(i))])}))]):t._e(),"blood"==t.btmKey?a("div",{staticClass:"btm"},[a("div",{staticClass:"title"},[t._v("血型")]),a("ul",t._l(["O","AB","A","B"],function(i){return a("li",{on:{click:function(e){t.updateMsg(i)}}},[t._v(t._s(i))])}))]):t._e(),"cardType"==t.btmKey?a("div",{staticClass:"btm"},[a("div",{staticClass:"title"},[t._v("证件类型")]),a("ul",t._l(["身份证","港澳台通行证","台胞证","护照"],function(i){return a("li",{on:{click:function(e){t.updateMsg(i)}}},[t._v(t._s(i))])}))]):t._e(),"colthSize"==t.btmKey?a("div",{staticClass:"btm"},[a("div",{staticClass:"title"},[t._v("服装尺码")]),a("ul",t._l(["S","M","L","XL","XXL"],function(i){return a("li",{on:{click:function(e){t.updateMsg(i)}}},[t._v(t._s(i))])}))]):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isMapShow,expression:"isMapShow"}],staticClass:"map-ctn"},[a("div",{staticClass:"page-title"},[a("img",{staticClass:"back",attrs:{src:e(43)},on:{click:function(i){t.isMapShow=!1}}}),t._v("地图")]),a("div",{attrs:{id:"map"}}),t._m(0)])])},staticRenderFns:[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"search"},[e("input",{attrs:{type:"text",id:"searchkey",placeholder:"输入搜索地址！"}})])}]}},28:function(t,i,e){function a(t){e(111)}var s=e(2)(e(113),e(114),a,"data-v-6cae86ff",null);t.exports=s.exports},43:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+IEmuOgAAAgtJREFUWIXt1ztrFGEYhuErBxVFQUGbrewELRfUQkEQPIBiPGEjBpIgKmJhYauInY1FEJRoPKBBEBQlmEBAEH+CB/wFBmwEjahEYvElknyTmewuk5kgc8Oyy7MM3OzOPO/7UVFRUQFt9Xq9leu2YhAbcR1X8lNKp72Fa3ZgDJuxCpexKU+pNJqV3YlXWBPly/LRyaYZ2V0Yweoof4B3eQll0ajsbgwLf/tsHqEnV6MMGpHdgxeSovfRjT95S6WxkOw+PJcUHUSvAkXJlt0viK6M8gEliJIue1AQXRHlt3AaU4splcZ8sl14iuVRfhNnlSRKUvYonkiK9uO8EkWZK3scQ5KiN3BByaLQOf1+QujMjuj7O7iKtUVKRUzhK2GRSRNdSoyjp61er3/B+rJtGuBzK1tXabQLT3nhBd8k4+jtFKqqHQ8l79sBXCpYLObfAzbTBkOYxONZGfThOy5aAtXVUavVZj5/mH51mfsLb8c6jBarlmS2LHzEexw2V3gbNginhNKYrw2e4Rh+R/k5YT9oW2ypNNKq6yWO4FeUn8FtJQln9eywcP/+jPI+oSUKn3gLDYURQfhHlPcIe0Ohwo1MsFEckhTuxj0FCjc6bsdwQFL4JO7mapRBM7vBa+FcNhHlp7AlN6MMml1k3ggn3m9RPpmPTjatbF1vsVeYdhO4hk95SlVUVFT8R/wFRURXGecH2+wAAAAASUVORK5CYII="}});