webpackJsonp([5],{371:function(t,e,a){function i(t){a(494)}var s=a(127)(a(496),a(497),i,"data-v-ac7b04e0",null);t.exports=s.exports},379:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+IEmuOgAAAgtJREFUWIXt1ztrFGEYhuErBxVFQUGbrewELRfUQkEQPIBiPGEjBpIgKmJhYauInY1FEJRoPKBBEBQlmEBAEH+CB/wFBmwEjahEYvElknyTmewuk5kgc8Oyy7MM3OzOPO/7UVFRUQFt9Xq9leu2YhAbcR1X8lNKp72Fa3ZgDJuxCpexKU+pNJqV3YlXWBPly/LRyaYZ2V0Yweoof4B3eQll0ajsbgwLf/tsHqEnV6MMGpHdgxeSovfRjT95S6WxkOw+PJcUHUSvAkXJlt0viK6M8gEliJIue1AQXRHlt3AaU4splcZ8sl14iuVRfhNnlSRKUvYonkiK9uO8EkWZK3scQ5KiN3BByaLQOf1+QujMjuj7O7iKtUVKRUzhK2GRSRNdSoyjp61er3/B+rJtGuBzK1tXabQLT3nhBd8k4+jtFKqqHQ8l79sBXCpYLObfAzbTBkOYxONZGfThOy5aAtXVUavVZj5/mH51mfsLb8c6jBarlmS2LHzEexw2V3gbNginhNKYrw2e4Rh+R/k5YT9oW2ypNNKq6yWO4FeUn8FtJQln9eywcP/+jPI+oSUKn3gLDYURQfhHlPcIe0Ohwo1MsFEckhTuxj0FCjc6bsdwQFL4JO7mapRBM7vBa+FcNhHlp7AlN6MMml1k3ggn3m9RPpmPTjatbF1vsVeYdhO4hk95SlVUVFT8R/wFRURXGecH2+wAAAAASUVORK5CYII="},380:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{areaList:[]}},methods:{showNearList:function(t){this.areaList=t.regeocode.pois},getAddressInfo:function(t,e){var a=this;$.ajax({type:"GET",url:"https://restapi.amap.com/v3/geocode/regeo",dataType:"JSON",data:{output:"JSON",location:t+","+e,key:"5b384bd6b1c25c86a18cdef18c82c679",radius:10,extensions:"base"},success:function(i){a.chooseMapCallback&&a.chooseMapCallback(i,t,e)}})},showMap:function(){var t,e=this,a=!0;this.cmFun.getLocation(function(i){e.lng=i.coords.longitude,e.lat=i.coords.latitude,t=[i.coords.longitude,i.coords.latitude],a=!1}),this.isMapShow=!0;var i=this;AMapUI.loadUI(["misc/PositionPicker"],function(t){function e(t){t.poi&&t.poi.location&&(a.setZoom(15),a.setCenter(t.poi.location),marker.setPosition(new AMap.LngLat(t.poi.location.lng,t.poi.location.lat)))}var a=new AMap.Map("map",{zoom:16,scrollWheel:!1}),s=new t({mode:"dragMap",map:a});s.start(),a.panBy(0,1),s.on("success",function(t){console.log(t),i.showNearList(t)});var n=new AMap.Autocomplete({input:"searchkey"});AMap.event.addListener(n,"select",e);a.on("click",function(t){var e=t.lnglat.getLng(),a=t.lnglat.getLat();$.ajax({type:"GET",url:"https://restapi.amap.com/v3/geocode/regeo",dataType:"JSON",data:{output:"JSON",location:e+","+a,key:"5b384bd6b1c25c86a18cdef18c82c679",radius:10,extensions:"base"},success:function(t){i.chooseMapCallback&&i.chooseMapCallback(t,e,a)}})})})}}}},392:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+IEmuOgAAAmVJREFUWIXN2b9PE2EYwPEPl8KAsggORHQhgTAZI/wBMBOMiwRl0gH8xcyuiztEMcYJFScTEuMmu+AOJMZBCAtMqENJ0OHekv44jra2Pb9Jh7v3vff5tnd9+zxP275fvaYOIoxgFMMYwCWcC+O/sIttbGAN6ziuNVBbjYJ9eIg7uFxjrB94g0XsVHtRVOW87rDwN8zXISdcMx/WWAxrNkTwFjbxAB11iJXTEdbaxORZk9MEc3iO9+hpgFg5PVgJMXKnTTpNsBMfMNt4rwpmQ6zOpMEkwRzeYbyJUuWMh5gVn2SS4AImmm2UwESIXUK54CRmWqKTzAymik8UC3ZLeAcZsICLhYNiwaea822tlQt4UjgoCF7BvUx0krkrdjoRvI/2zHQqaRc7icJrOlOdZKYRFbKSvoxlkujDSISxrE1SGI1wPWuLFIYjDGZtkcJgDr1nTGprssSflLHeCF1NFvgXuqrNqDMjwmHWEikc5rAnvT5Ie0aazV6ErQwFzmIrwtesLVLYiMRF9f/KWoQvaiikW8gO1iNxO2I5Y5kklnFc2AcXkc9Qppy82OkkYd3Bq8x0KnktPHbFzaNu8ZZTVc+kiRyIE5gDSoumAzzKwqiMOUGOyrp4BUst1SnlJd4Wn0hKFuaw2hKdUlbxuPxkkmBeXN1/arZRER9DzIqd5LR06zduaM3tXsLNELOCtHzwSNwam8J+473s43aIcXTapGoS1hUM4YXGbOb5sNaQuOWWSrUZ9b640u/HM3EHv1Z2w7X9Ya2q7kqtXf4ChYJ/TFy2DogL7fNh/Kf4l2BbnM59VuffEH8BT31pkY2z9GMAAAAASUVORK5CYII="},393:function(t,e){t.exports="data:image/png;base64,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"},494:function(t,e,a){var i=a(495);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(350)("0d06719e",i,!0)},495:function(t,e,a){e=t.exports=a(349)(!1),e.push([t.i,".sort[data-v-ac7b04e0]{border-bottom:1px solid #e7e7e7}.file[data-v-ac7b04e0]{position:relative}.file input[data-v-ac7b04e0]{position:absolute;width:100%;height:100%;top:0;left:0;opacity:0}.file span[data-v-ac7b04e0]{height:2.1rem;margin-top:.2rem}.file img[data-v-ac7b04e0]{max-width:100%;max-height:100%}.edit-input[data-v-ac7b04e0]{font-size:1rem;width:100%;background:#fff;padding-left:.3rem;margin-top:.5rem;height:2.5rem;border:none}.edit-input+span[data-v-ac7b04e0]{float:right;margin-right:.5rem}",""])},496:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(380),s=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={name:"teamSet",mixins:[s.default],data:function(){return{team:{image:"",name:"",address:[],tags:[]},newTag:"",id:this.$route.query.id,isMapShow:!1,editKey:"",editStr:"",editName:"",editSign:""}},mounted:function(){var t=this,e=this;document.addEventListener("optionMenu",function(t){e.isMapShow&&(e.isMapShow=!1)},!1),aliPayNative.setTitle("跑团设置"),aliPayNative.setOptBtn("保存"),this.cmFun.ajax("get","/group/view/"+this.id+"/"+localStorage.aliSportUserId,{},function(e){if(1!=e.code)return void alert(e.msg);t.team=e.data,t.team.address||(t.team.address=[]),t.team.tags||(t.team.tags=[]),t.team.signature=t.team.signature.length>36?t.team.signature.substring(0,35)+"...":t.team.signature})},methods:{changeImg:function(){var t=this,e=this;this.cmFun.upFile("file","",function(a){t.cmFun.ajax("post","/group/setup/"+e.id+"/"+localStorage.aliSportUserId,{image:a.data},function(e){1!=e.code&&alert(e.msg),1==e.code&&(t.team.image=a.data)})})},edit:function(t){this.editKey=t,"name"==t?this.editStr="团名称":"signature"==t&&(this.editStr="团签名")},editSure:function(){var t=this,e={id:this.id,userId:localStorage.aliSportUserId};if("name"==this.editKey){var a=this.editName.replace(/\s+/g,"");if(""==a||a.length>20)return void alert("名称为1-20个字");e.name=a}if("signature"==this.editKey){var i=this.editSign.replace(/\s+/g,"");if(""==i||i.length>50)return void alert("签名为1-50个字");e.signature=i}this.updateTeam(e,function(e){if(1!=e.code)return void alert(e.msg);"name"==t.editKey&&(t.team[t.editKey]=t.editName),"signature"==t.editKey&&(t.team[t.editKey]=t.editSign),t.editKey=""})},addTag:function(){var t=this,e=this.newTag.trim();if(""!=e){if(e.length>5)return void alert("标签长度不能大于5");if(this.team.tags.map(function(t){return t.tag}).indexOf(e)>=0)return void alert("已存在该标签");this.cmFun.ajax("post","/tag/save",{tag:e,groupId:this.id,userId:localStorage.aliSportUserId},function(e){1!=e.code&&alert(e.msg),1==e.code&&t.team.tags.push(e.data)})}},delTag:function(t,e){var a=this;this.cmFun.ajax("post","/tag/delete/"+t,{},function(t){1!=t.code&&alert(t.msg),1==t.code&&a.team.tags.splice(e,1)})},delAddress:function(t,e){var a=this;this.cmFun.ajax("post","/group/address/delete/"+t,{},function(t){1!=t.code&&alert(t.msg),1==t.code&&a.team.address.splice(e,1)})},goBack:function(){window.history.go(-1)},changeChoose:function(){var t=this;this.updateTeam({id:this.id,userId:localStorage.aliSportUserId,joinway:1==this.team.joinway?0:1},function(e){if(1!=e.code)return void alert(e.msg);1==t.team.joinway?t.team.joinway=0:t.team.joinway=1})},updateTeam:function(t,e){this.cmFun.ajax("post","/group/setup/"+this.id+"/"+localStorage.aliSportUserId,t,function(t){1!=t.code&&alert(t.msg),1==t.code&&e(t)})},chooseMapCallback:function(t,e,a){var i=this,s=t.regeocode.addressComponent,n={groupId:this.id,longitude:e,latitude:a,province:s.province,city:"string"==typeof s.city?s.city:"",area:s.district,address:t.regeocode.formatted_address};this.cmFun.ajax("post","/group/address/save",n,function(t){if(1!=t.code)return void alert(t.msg);$(".amap-sug-result").remove(),i.team.address.push(n),i.isMapShow=!1})}}}},497:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"addTeam"},[""==t.editKey?i("div",[i("div",{staticClass:"form"},[i("div",{staticClass:"sort file"},[t._v("头像"),i("span",[i("img",{attrs:{src:t.team.image}})]),i("input",{attrs:{type:"file",id:"file"},on:{change:t.changeImg}})]),i("div",{staticClass:"sort"},[t._v("团名称"),i("span",{on:{click:function(e){t.edit("name")}}},[t._v(t._s(t.team.name))])]),i("div",{staticClass:"sort"},[t._v("团签名"),i("span",{on:{click:function(e){t.edit("signature")}}},[t._v(t._s(t.team.signature))])]),i("div",{staticClass:"row address"},[i("label",[t._v("常活动地址")]),i("div",{staticClass:"fr"},[i("img",{attrs:{src:a(393)},on:{click:t.showMap}})])]),i("div",{staticClass:"row"},t._l(t.team.address,function(e,s){return i("div",{staticClass:"address"},[i("span",[t._v(t._s(e.address))]),i("img",{attrs:{src:a(392)},on:{click:function(a){t.delAddress(e.id,s)}}})])})),i("div",{staticClass:"row"},[i("label",[t._v("标签")]),i("div",{staticClass:"tag"},[t._l(t.team.tags,function(e,a){return i("div",{staticClass:"tag-box"},[i("span",[t._v(t._s(e.tag))]),i("div",{staticClass:"x",on:{click:function(i){t.delTag(e.id,a)}}},[t._v("x")])])}),i("div",{staticClass:"add-tag"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newTag,expression:"newTag"}],attrs:{type:"text",placeholder:"标签"},domProps:{value:t.newTag,value:t.newTag},on:{input:function(e){e.target.composing||(t.newTag=e.target.value)}}}),i("div",{staticClass:"add",on:{click:t.addTag}},[t._v("贴上")])])],2)]),i("div",{staticClass:"row"},[i("label",[t._v("入团是否需要验证")]),i("div",{staticClass:"fr"},[i("div",{staticClass:"switch",class:1==t.team.joinway?"sure":"",on:{click:t.changeChoose}})])]),i("div",{staticClass:"sort"},[i("router-link",{attrs:{to:{path:"/memberList",query:{id:t.id,type:1}}}},[i("div",[t._v("待审核成员"),i("span",[t._v(t._s(t.team.sign))])])])],1),i("div",{staticClass:"sort"},[i("router-link",{attrs:{to:{path:"/memberList",query:{id:t.id,type:0}}}},[i("div",[t._v("全部成员"),i("span",[t._v(t._s(t.team.sign))])])])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isMapShow,expression:"isMapShow"}],staticClass:"map-ctn"},[i("div",{staticClass:"page-title"},[i("img",{staticClass:"back",attrs:{src:a(379)},on:{click:function(e){t.isMapShow=!1}}}),t._v("地图")]),i("div",{staticClass:"map"},[i("div",{attrs:{id:"map"}}),i("div",{staticClass:"area-list"},t._l(t.areaList,function(e,a){return i("div",{staticClass:"item",on:{click:function(a){t.getAddressInfo(e.location.lng,e.location.lat)}}},[i("div",{staticClass:"name"},[t._v(t._s(e.name))]),i("div",{staticClass:"address"},[t._v(t._s(e.address))])])}))])])])]):t._e(),""!=t.editKey?i("div",[i("div",{staticClass:"page-title"},[i("img",{staticClass:"back",attrs:{src:a(379)},on:{click:function(e){t.editName=t.editSign=t.editKey=""}}}),i("span",[t._v(t._s(t.editStr))]),i("div",{staticClass:"features",on:{click:t.editSure}},[t._v("确定")])]),"name"==t.editKey?i("div",{staticStyle:{"padding-top":"2rem"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.editName,expression:"editName"}],staticClass:"edit-input",attrs:{type:"text",placeholder:"请输入团名称",value:"editName"},domProps:{value:t.editName},on:{input:function(e){e.target.composing||(t.editName=e.target.value)}}}),i("span",[t._v(t._s(20-t.editName.replace(/\s+/g,"").length))])]):t._e(),"signature"==t.editKey?i("div",{staticStyle:{"padding-top":"2rem"}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editSign,expression:"editSign"}],staticClass:"edit-input",attrs:{placeholder:"请输入团签名",value:"editSign"},domProps:{value:t.editSign},on:{input:function(e){e.target.composing||(t.editSign=e.target.value)}}}),i("span",[t._v(t._s(50-t.editSign.replace(/\s+/g,"").length))])]):t._e()]):t._e()])},staticRenderFns:[]}}});