webpackJsonp([17],{149:function(t,i,e){var o=e(150);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e(18)("38b62574",o,!0)},150:function(t,i,e){i=t.exports=e(17)(!1),i.push([t.i,".activity-sign[data-v-4d7b712b]{padding-bottom:4rem}.row[data-v-4d7b712b]{border-bottom:1px solid #c1c1c1;padding:.5rem;background:#fff;text-align:left}.row label[data-v-4d7b712b]{font-size:1rem;line-height:1.5rem;color:red;display:block}.row label span[data-v-4d7b712b]{color:#333}.row img[data-v-4d7b712b]{float:right;margin:-1rem .5rem 0 0;width:1rem}.row input[data-v-4d7b712b]{width:80%;font-size:.8rem;height:1.5rem;color:#666;border:none}.map-ctn #map[data-v-4d7b712b],.map-ctn .close[data-v-4d7b712b],.map-ctn .search[data-v-4d7b712b]{position:fixed}.map-ctn #map[data-v-4d7b712b]{width:100%;height:100%;top:0;left:0}.map-ctn .search[data-v-4d7b712b]{width:20rem;height:2.5rem;top:3rem;left:50%;margin-left:-10rem}.map-ctn .search input[data-v-4d7b712b]{width:100%;height:100%;background:#fff;font-size:1rem}.map-ctn .close[data-v-4d7b712b]{width:5rem;height:5rem;font-size:4rem;text-align:center;background:#fff;border:1px solid #c1c1c1;top:10rem;left:50%;margin-left:20rem}.file[data-v-4d7b712b]{margin-right:.5rem;font-size:3rem;line-height:8rem;position:relative;text-align:center}.file img[data-v-4d7b712b],.file input[data-v-4d7b712b]{display:block;position:absolute;width:100%;height:100%;top:0;left:0;margin:0;border:none;z-index:1}.file input[data-v-4d7b712b]{z-index:2;opacity:0}.file img[data-v-4d7b712b]{width:auto;height:auto;max-width:100%;max-height:100%;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}",""])},151:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={name:"enroll",data:function(){return{options:{},keyStr:this.$route.query.keys,keys:[],isMapShow:!1,showBtm:!1,act:this.$route.query.act,info:{name:"",mobile:"",blood:"",birth:""},btmKey:"",activeId:this.$route.query.activeId,aliActiveEventId:this.$route.query.eventId,allKey:[{key:"name",str:"真实姓名"},{key:"sex",str:"性别"},{key:"mobile",str:"手机号"},{key:"email",str:"邮箱"},{key:"country",str:"国籍"},{key:"city",str:"城市"},{key:"address",str:"详细地址"},{key:"blood",str:"血型"},{key:"birth",str:"出生日期"},{key:"cardType",str:"证件类型"},{key:"cardno",str:"证件号"},{key:"clothSize",str:"服装尺码"},{key:"contact",str:"紧急联系人"},{key:"contactNumber",str:"紧急联系人电话"},{key:"raceCert",str:"完赛证明"},{key:"healthCert",str:"健康证明"}]}},mounted:function(){var t=this;this.$nextTick(function(){var i=["sex","height","weight","blood","cardType","clothSize","city","address"],e=["raceCert","healthCert"];if(t.keys=JSON.parse(t.keyStr),console.log(t.keys),t.keys=t.keys.map(function(o){return i.indexOf(o.key)>=0?t.$set(o,"valueType",1):e.indexOf(o.key)>=0?t.$set(o,"valueType",2):t.$set(o,"valueType",3),o}),t.keys.map(function(t){return t.key}).indexOf("birth")>-1){var o=t;setTimeout(function(){(new datePicker).init({trigger:"#birth",type:"date",minDate:"1900-1-1",maxDate:"2099-1-1",onSubmit:function(){o.options.birth=this.value},onClose:function(){}})},100)}})},methods:{change:function(t){var i=this;this.cmFun.upFile(t,"dir",function(e){if(1!=e.code)return void alert(e.msg);i.$set(i.options,t,e.data)})},inputClick:function(t){"city"==t.key||"address"==t.key?(this.isMapShow=!0,this.showMap()):(this.showBtm=!0,this.btmKey=t.key)},updateMsg:function(t){this.options[this.btmKey]=t},goBack:function(){window.history.go(-1)},enroll:function(){var t=this,i=this.keys.map(function(t){return t.key});if(i.indexOf("nick")>-1&&(!this.options.nick||""==this.options.nick.trim()))return void alert("昵称没填~");if(i.indexOf("name")>-1&&(!this.options.name||""==this.options.name.trim()))return void alert("真实姓名没填~");if(i.indexOf("sex")>-1&&(!this.options.sex||""==this.options.sex.trim()))return void alert("性别没选~");if(i.indexOf("birth")>-1&&(!this.options.birth||""==this.options.birth.trim()))return void alert("生日没选~");if(i.indexOf("email")>-1){if(!this.options.email||""==this.options.email.trim())return void alert("邮箱没填~");if(this.options.email=this.options.email.trim(),!/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(this.options.email))return void alert("邮箱格式不对~")}if(i.indexOf("city")>-1&&(!this.options.city||""==this.options.city.trim()))return void alert("城市地址没选~");if(i.indexOf("height")>-1&&(!this.options.height||""==this.options.height.trim()))return void alert("身高没选~");if(i.indexOf("weight")>-1&&(!this.options.weight||""==this.options.weight.trim()))return void alert("体重没选~");if(i.indexOf("blood")>-1&&(!this.options.blood||""==this.options.blood.trim()))return void alert("血型没选~");if(i.indexOf("cardType")>-1&&(!this.options.cardType||""==this.options.cardType.trim()))return void alert("证件类型没选~");if(i.indexOf("cardno")>-1){if(!this.options.cardno||""==this.options.cardno.trim())return void alert("证件号没填~");this.options.cardno=this.options.cardno.trim();var e=/^[1-9]\d{5}[1-2]\d{10}([0-9]|x|X)$/,o=/(^[a-zA-Z0-9]{3,21}$)|(^(P\d{7})|(G\d{8})$)/,s=/^[a-zA-Z0-9]{5,21}$/;if(!(e.test(this.options.cardno)||o.test(this.options.cardno)||s.test(this.options.cardno)))return void alert("证件号有误~")}if(i.indexOf("clothSize")>-1&&(!this.options.clothSize||""==this.options.clothSize.trim()))return void alert("服装尺寸没选~");if(i.indexOf("contact")>-1&&(!this.options.contact||""==this.options.contact.trim()))return void alert("紧急联系人没填~");if(i.indexOf("contactNumber")>-1){if(!this.options.contactNumber||""==this.options.contactNumber.trim())return void alert("紧急联系人电话没填~");if(this.options.contactNumber=this.options.contactNumber.trim(),!/^1[3|4|5|7|8][0-9]\d{8}$/.test(this.options.contactNumber))return void alert("紧急联系人电话有误~")}var a=this.options;a.aliActiveEventId=this.aliActiveEventId,a.activeId=this.activeId,a.userId=localStorage.aliSportUserId,a.sex&&(a.sex="男"==a.sex?"1":"0"),a.birth&&(a.birth=new Date(a.birth).getTime()),this.cmFun.ajax("post","/active/user/save",a,function(i){alert(i.msg),1==i.code&&t.$router.push({path:"/activityDetail",query:{id:t.activeId,isEnroll:!0}})})},chooseTime:function(){},showMap:function(){function t(t){t.poi&&t.poi.location&&(s.setZoom(15),s.setCenter(t.poi.location),marker.setPosition(new AMap.LngLat(t.poi.location.lng,t.poi.location.lat)))}var i,e=this,o=!0;this.cmFun.getLocation(function(t){e.lng=t.coords.longitude,e.lat=t.coords.latitude,i=[t.coords.longitude,t.coords.latitude],o=!1}),this.isMapShow=!0;var s=new AMap.Map("map",{resizeEnable:!0,zoom:13,center:o?[120.180304,30.276887]:i}),a=this,n=(s.on("click",function(t){var i=t.lnglat.getLng(),e=t.lnglat.getLat();$.ajax({type:"GET",url:"https://restapi.amap.com/v3/geocode/regeo",dataType:"JSON",data:{output:"JSON",location:i+","+e,key:"5b384bd6b1c25c86a18cdef18c82c679",radius:10,extensions:"base"},success:function(t){console.log(t);var o=t.regeocode.addressComponent,s={longitude:i,latitude:e,province:o.province,city:"string"==typeof o.city?o.city:"",area:o.district,address:t.regeocode.formatted_address};$(".amap-sug-result").remove(),a.options.address=s.address,a.options.city=s.city,a.options.longitude=s.longitude,a.options.latitude=s.latitude,a.isMapShow=!1}})}),new AMap.Autocomplete({input:"searchkey"}));AMap.event.addListener(n,"select",t)}}}},152:function(t,i,e){t.exports={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"activity-sign"},[o("div",{staticClass:"team-item",attrs:{id:"aa"}},[o("div",{staticClass:"img"},[o("img",{attrs:{src:t.act.image}})]),o("div",{staticClass:"name"},[t._v(t._s(t.act.name))]),o("div",{staticClass:"address"},[t._v(t._s(t.act.address))])]),t._l(t.keys,function(i){return o("div",{staticClass:"row"},[o("label",[t._v("*"),o("span",[t._v(t._s(i.str))])]),1==i.valueType?o("input",{directives:[{name:"model",rawName:"v-model",value:t.options[i.key],expression:"options[item.key]"}],attrs:{type:"text",placeholder:"请选择"+i.str,readonly:"readonly"},domProps:{value:t.options[i.key],value:t.options[i.key]},on:{click:function(e){t.inputClick(i)},input:function(e){e.target.composing||t.$set(t.options,i.key,e.target.value)}}}):t._e(),2==i.valueType?o("div",{staticClass:"file"},[o("span",[t._v("+")]),o("img",{attrs:{src:t.options[i.key]}}),o("input",{attrs:{type:"file",id:i.key},on:{change:function(e){t.change(i.key)}}})]):t._e(),3==i.valueType?o("input",{directives:[{name:"model",rawName:"v-model",value:t.options[i.key],expression:"options[item.key]"}],attrs:{type:"text",placeholder:"请输入"+i.str,id:"birth"==i.key?"birth":""},domProps:{value:t.options[i.key],value:t.options[i.key]},on:{input:function(e){e.target.composing||t.$set(t.options,i.key,e.target.value)}}}):t._e()])}),o("div",{staticClass:"btm-hide",class:t.showBtm?"show":"hide",on:{click:function(i){t.showBtm=!1}}},["sex"==t.btmKey?o("div",{staticClass:"btm"},[o("div",{staticClass:"title"},[t._v("选择性别")]),o("ul",[o("li",{on:{click:function(i){t.updateMsg("男")}}},[t._v("男")]),o("li",{on:{click:function(i){t.updateMsg("女")}}},[t._v("女")])])]):t._e(),"height"==t.btmKey?o("div",{staticClass:"btm"},[o("div",{staticClass:"title"},[t._v("选择身高")]),o("ul",t._l([140,145,150,155,160,165,170,175,180,185,190,195],function(i){return o("li",{on:{click:function(e){t.updateMsg(i)}}},[t._v(t._s(i))])}))]):t._e(),"weight"==t.btmKey?o("div",{staticClass:"btm"},[o("div",{staticClass:"title"},[t._v("选择体重")]),o("ul",t._l([50,55,60,65,70,75,80,85,90,95,100,105,110,115,120],function(i){return o("li",{on:{click:function(e){t.updateMsg(i)}}},[t._v(t._s(i))])}))]):t._e(),"blood"==t.btmKey?o("div",{staticClass:"btm"},[o("div",{staticClass:"title"},[t._v("血型")]),o("ul",t._l(["O","AB","A","B"],function(i){return o("li",{on:{click:function(e){t.updateMsg(i)}}},[t._v(t._s(i))])}))]):t._e(),"cardType"==t.btmKey?o("div",{staticClass:"btm"},[o("div",{staticClass:"title"},[t._v("证件类型")]),o("ul",t._l(["身份证","港澳台通行证","台胞证","护照"],function(i){return o("li",{on:{click:function(e){t.updateMsg(i)}}},[t._v(t._s(i))])}))]):t._e(),"clothSize"==t.btmKey?o("div",{staticClass:"btm"},[o("div",{staticClass:"title"},[t._v("服装尺码")]),o("ul",t._l(["S","M","L","XL","XXL"],function(i){return o("li",{on:{click:function(e){t.updateMsg(i)}}},[t._v(t._s(i))])}))]):t._e()]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isMapShow,expression:"isMapShow"}],staticClass:"map-ctn"},[o("div",{staticClass:"page-title"},[o("img",{staticClass:"back",attrs:{src:e(43)},on:{click:function(i){t.isMapShow=!1}}}),t._v("地图")]),o("div",{attrs:{id:"map"}}),t._m(0)]),o("div",{staticClass:"fix-bottom",on:{click:t.enroll}},[o("div",[t._v("确定")])])],2)},staticRenderFns:[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"search"},[e("input",{attrs:{type:"text",id:"searchkey",placeholder:"输入搜索地址！"}})])}]}},37:function(t,i,e){function o(t){e(149)}var s=e(2)(e(151),e(152),o,"data-v-4d7b712b",null);t.exports=s.exports},43:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+IEmuOgAAAgtJREFUWIXt1ztrFGEYhuErBxVFQUGbrewELRfUQkEQPIBiPGEjBpIgKmJhYauInY1FEJRoPKBBEBQlmEBAEH+CB/wFBmwEjahEYvElknyTmewuk5kgc8Oyy7MM3OzOPO/7UVFRUQFt9Xq9leu2YhAbcR1X8lNKp72Fa3ZgDJuxCpexKU+pNJqV3YlXWBPly/LRyaYZ2V0Yweoof4B3eQll0ajsbgwLf/tsHqEnV6MMGpHdgxeSovfRjT95S6WxkOw+PJcUHUSvAkXJlt0viK6M8gEliJIue1AQXRHlt3AaU4splcZ8sl14iuVRfhNnlSRKUvYonkiK9uO8EkWZK3scQ5KiN3BByaLQOf1+QujMjuj7O7iKtUVKRUzhK2GRSRNdSoyjp61er3/B+rJtGuBzK1tXabQLT3nhBd8k4+jtFKqqHQ8l79sBXCpYLObfAzbTBkOYxONZGfThOy5aAtXVUavVZj5/mH51mfsLb8c6jBarlmS2LHzEexw2V3gbNginhNKYrw2e4Rh+R/k5YT9oW2ypNNKq6yWO4FeUn8FtJQln9eywcP/+jPI+oSUKn3gLDYURQfhHlPcIe0Ohwo1MsFEckhTuxj0FCjc6bsdwQFL4JO7mapRBM7vBa+FcNhHlp7AlN6MMml1k3ggn3m9RPpmPTjatbF1vsVeYdhO4hk95SlVUVFT8R/wFRURXGecH2+wAAAAASUVORK5CYII="}});